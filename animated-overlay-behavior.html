<link rel="import" href="../polymer/polymer.html">

<script>
(function() {
  'use strict';

  window.AnimatedOverlayBehavior = {
    
    properties: {

      openAnimationConfig: {
        type: Object,
        value: _ => {
          return {
            keyframes: [
              {opacity: 0, transform: 'translateY(100px)'}, 
              {opacity: 1, transform: 'translateY(0)'}               
            ],
            options: {
              duration: 225,
              easing: 'cubic-bezier(0.165, 0.84, 0.44, 1)'
            }
          };
        } 
      },

      closeAnimationConfig: {
        type: Object,
        value: _ => {
          return {
            keyframes: [
              {opacity: 1, transform: 'translateY(0)'},     
              {opacity: 0, transform: 'translateY(100px)'}             
            ],
            options: {
              duration: 300,
              easing: 'cubic-bezier(0.645, 0.045, 0.355, 1)'
            }
          };
        }
      }
  
    },

    listeners: {
      'overlay-opened': '_overlayOpened',
      'overlay-closed': '_overlayClosed'
    },

    _overlayOpened() {
      const config = this.openAnimationConfig;

      this._animation = this.animate(config.keyframes, config.options);
      this._animation.onfinish = _ => {
        this.fire('overlay-open-animation-finish');
        this._animation = null;
      };
    },

    _overlayClosed() {
      const config = this.closeAnimationConfig;

      this.style.display = '';
      this._animation = this.animate(config.keyframes, config.options);
      this._animation.onfinish = _ => {
        this.fire('overlay-close-animation-finish');
        this._animation = null;
        this.remove();
      };
    }

  };

})();
</script>
